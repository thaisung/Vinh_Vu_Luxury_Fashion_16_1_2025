{% extends './base.html' %}
{% block content %}
<div class="flex-1 flex-col w-full h-full" style="width: calc(100% - 250px);">
    <header class="z-10 py-4 bg-white shadow-md dark:bg-gray-800 flex  px-[10px] justify-start md:justify-center items-start md:items-center">
        <button class="open_menu_website p-1 mr-5 -ml-1 rounded-md md:hidden focus:outline-none focus:shadow-outline-green"
          @click="toggleSideMenu" aria-label="Menu">
          <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd"
              d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
              clip-rule="evenodd"></path>
          </svg>
        </button>
        <!-- Search input -->
        <div class="flex flex-row md:flex-col justify-center items-start md:items-center  gap-2 w-full overflow-x-auto">
          <div class="flex flex-col md:flex-row  justify-start h-full   gap-3 ">
            <button
              class="open_form_create w-full flex gap-2 shadow-md items-center justify-center self-start px-4 py-2 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-green-600 border border-transparent rounded-lg active:bg-green-600 hover:bg-green-700 focus:outline-none focus:shadow-outline-green">
              <svg class="fill-white w-[20px]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="feather feather-plus">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              <span class="whitespace-nowrap hidden md:block">T·∫°o kh√°ch h√†ng m·ªõi</span>
            </button>
            <!-- <button
              class="open_form_upload_file flex gap-2 shadow-md items-center justify-between self-start px-4 py-2 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-green-600 border border-transparent rounded-lg active:bg-green-600 hover:bg-green-700 focus:outline-none focus:shadow-outline-green">
              <svg class="fill-white w-[20px]" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>cloud, upload, storage, memory, data</title><path d="M20.57,9.43A8,8,0,0,0,5.26,10,5,5,0,1,0,5,20h5V18H5a3,3,0,0,1,0-6,3.1,3.1,0,0,1,.79.12l1.12.31.14-1.15a6,6,0,0,1,11.74-.82l.15.54.54.16A3.46,3.46,0,0,1,22,14.5,3.5,3.5,0,0,1,18.5,18H16v2h2.5A5.48,5.48,0,0,0,20.57,9.43Z"></path><polygon points="16.71 15.29 13 11.59 9.29 15.29 10.71 16.71 12 15.41 12 20 14 20 14 15.41 15.29 16.71 16.71 15.29"></polygon></svg>
              <span class="whitespace-nowrap hidden md:block">Nh·∫≠p file kh√°ch h√†ng m·ªõi</span>
            </button> -->
            <!-- <a href="{% url 'export_lead' %}"
              class="flex gap-2 w-full shadow-md items-center justify-center self-start px-4 py-2 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-green-700 border border-transparent rounded-lg active:bg-green-600 hover:bg-green-800 focus:outline-none focus:shadow-outline-green">
              <svg class="fill-white w-[20px]" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>cloud, download, storage, memory, data</title><path d="M20.57,9.43A8,8,0,0,0,5.26,10,5,5,0,1,0,5,20h5V18H5a3,3,0,0,1,0-6,3.1,3.1,0,0,1,.79.12l1.12.31.14-1.15a6,6,0,0,1,11.74-.82l.15.54.54.16A3.46,3.46,0,0,1,22,14.5,3.5,3.5,0,0,1,18.5,18H16v2h2.5A5.48,5.48,0,0,0,20.57,9.43Z"></path><polygon points="12 11 12 15.59 10.71 14.29 9.29 15.71 13 19.41 16.71 15.71 15.29 14.29 14 15.59 14 11 12 11"></polygon></svg>
              <span class="whitespace-nowrap hidden md:block">Xu·∫•t file kh√°ch h√†ng</span>
            </a> -->
          </div>
          <form class="flex flex-col  justify-center items-center grow md:grow-0  gap-3">
            <div class="flex  relative items-center w-full md:w-[300px]">
              <input placeholder="T√¨m ki·∫øm kh√°ch h√†ng" name="s" value="{{s}}"
                class="block pr-[30px] w-full bg-stone-100 text-sm text-stone-800 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md " />
              <button type="submit" class="absolute right-0 cursor-pointer">
                <svg class="w-[30px]" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                  <title>icon 111 search</title>
                  <desc>Created with Sketch.</desc>
                  <defs></defs>
                  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
                    <g id="icon-111-search" sketch:type="MSArtboardGroup" fill="#000000">
                      <path
                        d="M19.4271164,21.4271164 C18.0372495,22.4174803 16.3366522,23 14.5,23 C9.80557939,23 6,19.1944206 6,14.5 C6,9.80557939 9.80557939,6 14.5,6 C19.1944206,6 23,9.80557939 23,14.5 C23,16.3366522 22.4174803,18.0372495 21.4271164,19.4271164 L27.0119176,25.0119176 C27.5621186,25.5621186 27.5575313,26.4424687 27.0117185,26.9882815 L26.9882815,27.0117185 C26.4438648,27.5561352 25.5576204,27.5576204 25.0119176,27.0119176 L19.4271164,21.4271164 L19.4271164,21.4271164 Z M14.5,21 C18.0898511,21 21,18.0898511 21,14.5 C21,10.9101489 18.0898511,8 14.5,8 C10.9101489,8 8,10.9101489 8,14.5 C8,18.0898511 10.9101489,21 14.5,21 L14.5,21 Z"
                        id="search" sketch:type="MSShapeGroup"></path>
                    </g>
                  </g>
                </svg>
              </button>
            </div>
            <div class="flex flex-col lg:flex-row gap-3 w-full">
              <div class="flex gap-2 w-full">
                <select name="f" onchange="this.form.submit()" value="{{f}}"
                class="bg-stone-100 text-sm text-stone-800 w-full md:w-[250px]  focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md">
                <option value="" class="bg-stone-100">--- Danh m·ª•c s·∫£n ph·∫©m ---</option>
                {% for i in list_campaign %}
                <option value="{{i.id}}" {% if f == i.id %}selected{% endif %} class="bg-stone-100">{{i.Name}}</option>
                {% endfor %}
              </select>
              <select name="st" onchange="this.form.submit()" value="{{st}}"
                class="bg-stone-100 text-sm text-stone-800 w-full md:w-[250px]  focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md">
                <option value="" class="bg-stone-100">--- Tr·∫°ng th√°i kh√°ch h√†ng ---</option>
                <option value="Ch∆∞a t∆∞ v·∫•n" {% if st == 'Ch∆∞a t∆∞ v·∫•n' %}selected{% endif %} class="bg-stone-100">Ch∆∞a t∆∞ v·∫•n</option>
                <option value="ƒê√£ t∆∞ v·∫•n" {% if st == 'ƒê√£ t∆∞ v·∫•n' %}selected{% endif %} class="bg-stone-100">ƒê√£ t∆∞ v·∫•n</option>
                <option value="G·ª≠i th√¥ng tin" {% if st == 'G·ª≠i th√¥ng tin' %}selected{% endif %} class="bg-stone-100">G·ª≠i th√¥ng tin</option>
                <option value="ƒê√£ xem d·ª± √°n" {% if st == 'ƒê√£ xem d·ª± √°n' %}selected{% endif %} class="bg-stone-100">ƒê√£ xem d·ª± √°n</option>
                <option value="KH kh√¥ng ti·ªÅm nƒÉng" {% if st == 'KH kh√¥ng ti·ªÅm nƒÉng' %}selected{% endif %} class="bg-stone-100">KH kh√¥ng ti·ªÅm nƒÉng</option>
                <option value="KH ƒê√£ booking" {% if st == 'KH ƒê√£ booking' %}selected{% endif %} class="bg-stone-100">KH ƒê√£ booking</option>
                <option value="KH ƒë√£ xem nh√† m·∫´u" {% if st == 'KH ƒë√£ xem nh√† m·∫´u' %}selected{% endif %} class="bg-stone-100">KH ƒë√£ xem nh√† m·∫´u</option>
                <option value="KH ti·ªÅm nƒÉng" {% if st == 'KH ti·ªÅm nƒÉng' %}selected{% endif %} class="bg-stone-100">KH ti·ªÅm nƒÉng</option>
                <option value="KH ƒê√£ mua" {% if st == 'KH ƒê√£ mua' %}selected{% endif %} class="bg-stone-100">KH ƒê√£ mua</option>
              </select>
              </div>
            <div class="flex gap-2">
              <select name="f1" onchange="this.form.submit()" value="{{f1}}"
              class="bg-stone-100 text-sm text-stone-800 w-full md:w-[250px]  focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md">
              <option value="" class="bg-stone-100">--- B√°o c√°o ---</option>
              <option value="0" {% if f1 == 0 %}selected{% endif %} class="bg-stone-100">Ch∆∞a b√°o c√°o</option>
              <option value="1" {% if f1 == 1 %}selected{% endif %} class="bg-stone-100">ƒê√£ b√°o c√°o</option>
              </select>
              <!-- <select name="f2" onchange="this.form.submit()" value="{{f2}}"
                class="bg-stone-100 text-sm text-stone-800 w-full md:w-[250px]  focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md">
                <option value="" class="bg-stone-100">--- Ghi ch√∫ l·ªãch s·ª≠ CSKH ---</option>
                <option value="0" {% if f2 == 0 %}selected{% endif %} class="bg-stone-100">Ch∆∞a ghi ch√∫</option>
                <option value="1" {% if f2 == 1 %}selected{% endif %} class="bg-stone-100">ƒê√£ ghi ch√∫</option>
              </select> -->
            </div>
            </div>
          </form>
        </div>
    </header>
    <main class="relative flex-1 flex-col gap-2  p-[10px]  bg-stone-100 ">
        {% if request.user.is_staff %}
        <h1 class="text-[18px] font-bold text-stone-800">Danh s√°ch kh√°ch h√†ng</h1>
        <div class="w-full mb-8  rounded-lg shadow-xs flex-1">
            <div id="table-container" class="content draggableDiv w-full max-w-none overflow-x-auto flex-1">
                <table class="min-w-full table-auto whitespace-nowrap">
                    <thead>
                        <tr
                            class="text-xs font-semibold tracking-wide text-left text-gray-500 uppercase border-b dark:border-gray-700 bg-stone-200 dark:text-gray-400 dark:bg-gray-800">
                            <th class="px-4 py-3">Kh√°ch h√†ng</th>
                            <th class="px-4 py-3">S·ªë ƒëi·ªán tho·∫°i</th>
                            <th class="px-4 py-3">T√¨nh tr·∫°ng</th>
                            <th class="px-4 py-3">Ghi ch√∫</th>
                            <th class="px-4 py-3">Ngu·ªìn</th>
                            <th class="px-4 py-3">Chi·∫øn d·ªãch</th>
                            <th class="px-4 py-3">Nhu c·∫ßu</th>
                            <th class="px-4 py-3">S·∫£n ph·∫©m</th>
                            <th class="px-4 py-3">Khu v·ª±c</th>
                            <th class="px-4 py-3">Tr·∫°ng th√°i</th>
                            <th class="px-4 py-3">Xem n·ªôi dung</th>
                            <th class="px-4 py-3">Ch·ª©c nƒÉng</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y dark:divide-gray-700 dark:bg-gray-800">
                        {% for i in list_lead %}
                        <tr class="text-gray-700 dark:text-gray-400 h-full">
                            <td 
                                data-id="{{i.id}}" 
                                data-name="{{i.Name}}"
                                data-phone-number="{{i.Phone_number}}"
                                data-area="{{i.Area}}"
                                data-product="{{i.Product}}"
                                data-demand="{{i.Demand}}"
                                data-status="{{i.Status}}"
                                data-note="{{i.Note}}"
                                data-belong-campaign-name="{{i.Belong_Campaign.Name}}"
                                data-belong-campaign-id="{{i.Belong_Campaign.id}}"
                                data-belong-user-username="{{i.Belong_User.username}}"
                                data-belong-user-id="{{i.Belong_User.id}}"
                                class="open_form_update  group  h-full font-medium  cursor-pointer hover:text-green-600 px-4 py-3 text-sm text whitespace-nowrap">
                                <span class="inline-block align-middle hover:underline">{{i.Name}}</span>
                                <svg class="hover:text-green-600 w-[20px] fill-stone-800 inline-block align-middle"  viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                                    <!-- Generator: Sketch 3.0.3 (7891) - http://www.bohemiancoding.com/sketch -->
                                    <title>icon 135 pen angled</title>
                                    <desc>Created with Sketch.</desc>
                                    <defs></defs>
                                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
                                        <g id="icon-135-pen-angled" sketch:type="MSArtboardGroup" class=" group-hover:fill-green-600 fill-stone-800">
                                            <path d="M23.1464466,12.0278086 L11.8535534,23.3207019 L11.8535534,23.3207019 L7.85355339,19.3207019 L19.1464466,8.02780864 L23.1464466,12.0278086 L23.1464466,12.0278086 Z M23.8535534,11.3207018 L25.5801067,9.59414849 C26.3642921,8.8099631 26.3661881,7.54044334 25.5897496,6.76400487 L24.4102504,5.58450561 C23.6313906,4.80564584 22.372781,4.80147421 21.5801067,5.59414851 L19.8535534,7.32070186 L23.8535534,11.3207018 L23.8535534,11.3207018 Z M11.1464466,24.0278086 L11,24.1742552 L6,25.1742552 L7,20.1742552 L7.14644661,20.0278086 L11.1464466,24.0278086 L11.1464466,24.0278086 Z" id="pen-angled" sketch:type="MSShapeGroup"></path>
                                        </g>
                                    </g>
                                </svg>
                            </td>
                            <td class="px-4 py-3 text-sm hover:underline whitespace-nowrap">
                                <a href="tel:{{i.Phone_number}}">{{i.Phone_number}}</a>
                            </td>
                            <td class="px-4 py-3 text-sm whitespace-nowrap">
                                <form method="post" action={% url 'lead_update_Status_lead_page_staff' %}>
                                    {% csrf_token %}
                                    <input type="hidden" name="id_lead_update_st" value="{{i.id}}"/>
                                    <select name="st" onchange="this.form.submit()" value="{{i.Status_lead}}"
                                    class="font-medium {% if i.Status_lead == 'Ch∆∞a t∆∞ v·∫•n' %}bg-stone-100
                                    {% elif i.Status_lead == 'ƒê√£ t∆∞ v·∫•n' %}bg-[#a6f0fa]
                                    {% elif i.Status_lead == 'G·ª≠i th√¥ng tin' %}bg-[#d2ff9e]
                                    {% elif i.Status_lead == 'ƒê√£ xem d·ª± √°n' %}bg-[#ffac92]
                                    {% elif i.Status_lead == 'KH kh√¥ng ti·ªÅm nƒÉng' %}bg-[#bcbcbc]
                                    {% elif i.Status_lead == 'KH ƒê√£ booking' %}bg-[#FF9800]
                                    {% elif i.Status_lead == 'KH ƒë√£ xem nh√† m·∫´u' %}bg-[#03A9F4]
                                    {% elif i.Status_lead == 'KH ti·ªÅm nƒÉng' %}bg-[#ffee5d]
                                    {% elif i.Status_lead == 'KH ƒê√£ mua' %}bg-[#ff6262]
                                    {% endif %} text-sm text-stone-800 w-full md:w-[200px]  focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md">
                                        <option value="" class="bg-stone-100">--- Tr·∫°ng th√°i kh√°ch h√†ng ---</option>
                                        <option value="Ch∆∞a t∆∞ v·∫•n" {% if i.Status_lead == 'Ch∆∞a t∆∞ v·∫•n' %}selected{% endif %} class="bg-stone-100">Ch∆∞a t∆∞ v·∫•n</option>
                                        <option value="ƒê√£ t∆∞ v·∫•n" {% if i.Status_lead == 'ƒê√£ t∆∞ v·∫•n' %}selected{% endif %} class="bg-stone-100">ƒê√£ t∆∞ v·∫•n</option>
                                        <option value="G·ª≠i th√¥ng tin" {% if i.Status_lead == 'G·ª≠i th√¥ng tin' %}selected{% endif %} class="bg-stone-100">G·ª≠i th√¥ng tin</option>
                                        <option value="ƒê√£ xem d·ª± √°n" {% if i.Status_lead == 'ƒê√£ xem d·ª± √°n' %}selected{% endif %} class="bg-stone-100">ƒê√£ xem d·ª± √°n</option>
                                        <option value="KH kh√¥ng ti·ªÅm nƒÉng" {% if i.Status_lead == 'KH kh√¥ng ti·ªÅm nƒÉng' %}selected{% endif %} class="bg-stone-100">KH kh√¥ng ti·ªÅm nƒÉng</option>
                                        <option value="KH ƒê√£ booking" {% if i.Status_lead == 'KH ƒê√£ booking' %}selected{% endif %} class="bg-stone-100">KH ƒê√£ booking</option>
                                        <option value="KH ƒë√£ xem nh√† m·∫´u" {% if i.Status_lead == 'KH ƒë√£ xem nh√† m·∫´u' %}selected{% endif %} class="bg-stone-100">KH ƒë√£ xem nh√† m·∫´u</option>
                                        <option value="KH ti·ªÅm nƒÉng" {% if i.Status_lead == 'KH ti·ªÅm nƒÉng' %}selected{% endif %} class="bg-stone-100">KH ti·ªÅm nƒÉng</option>
                                        <option value="KH ƒê√£ mua" {% if i.Status_lead == 'KH ƒê√£ mua' %}selected{% endif %} class="bg-stone-100">KH ƒê√£ mua</option>
                                    </select>
                                </form>
                            </td>
                            <td class="px-4 py-3 text-sm whitespace-nowrap">
                                {% if i.Note %}{{ i.Note|linebreaksbr }}{% endif %}
                            </td>
                            <td class="px-4 py-3 text-sm whitespace-nowrap">
                                {% if i.Source %}{{i.Source}}{% endif %}
                            </td>
                            <td class="px-4 py-3 text-sm max-w-[200px] overflow-x-auto whitespace-nowrap">
                                {{ i.Belong_Campaign.Name }}
                            </td>
                            <td class="px-4 py-3 text-sm whitespace-nowrap">
                                {{i.Demand}}
                            </td>
                            <td class="px-4 py-3 text-sm whitespace-nowrap">
                                {{i.Product}}
                            </td>
                            <td class="px-4 py-3 text-sm whitespace-nowrap">
                                {{i.Area}}
                            </td>
                            <td class="px-4 py-3 text-sm whitespace-nowrap">
                                {{i.Status}}
                            </td>
                            <td class="px-4 py-3 text-sm whitespace-nowrap">
                                <div class="flex flex-col justify-center ">
                                    <span data-id="{{i.id}}" data-name="{{i.Name}}" class="open_view_report text-green-500 cursor-pointer hover:underline whitespace-nowrap">Xem b√°o c√°o ({{i.list_report.all.count|default:'0'}})</span>
                                    {% comment %} <span data-id="{{i.id}}" data-name="{{i.Name}}" class="open_view_history text-stone-500 cursor-pointer hover:underline whitespace-nowrap">Xem l·ªãch s·ª≠ ({{i.list_history.all.count|default:'0'}})</span> {% endcomment %}
                                </div>
                            </td>
                            <td>
                                <div class="flex px-3 py-3 text-sm justify-center items-center grow">
                                    {% comment %} <a title="C·∫≠p nh·∫≠t"
                                    data-id="{{i.id}}" 
                                    data-name="{{i.Name}}"
                                    data-phone-number="{{i.Phone_number}}"
                                    data-area="{{i.Area}}"
                                    data-product="{{i.Product}}"
                                    data-demand="{{i.Demand}}"
                                    data-status="{{i.Status}}"
                                    data-note="{{i.Note}}"
                                    data-belong-campaign-name="{{i.Belong_Campaign.Name}}"
                                    data-belong-campaign-id="{{i.Belong_Campaign.id}}"
                                    data-belong-user-username="{{i.Belong_User.username}}"
                                    data-belong-user-id="{{i.Belong_User.id}}"
                                        class="open_form_update flex justify-center items-center ml-2 cursor-pointer px-1 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-green-600 border border-transparent rounded-md active:bg-stone-600 hover:bg-green-700 focus:outline-none focus:shadow-outline-green">
                                        <svg class="fill-white" width="32px" height="32px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                                            <title>icon 135 pen angled</title>
                                            <desc>Created with Sketch.</desc>
                                            <defs></defs>
                                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
                                                <g id="icon-135-pen-angled" sketch:type="MSArtboardGroup" fill="#ffffff">
                                                    <path d="M23.1464466,12.0278086 L11.8535534,23.3207019 L11.8535534,23.3207019 L7.85355339,19.3207019 L19.1464466,8.02780864 L23.1464466,12.0278086 L23.1464466,12.0278086 Z M23.8535534,11.3207018 L25.5801067,9.59414849 C26.3642921,8.8099631 26.3661881,7.54044334 25.5897496,6.76400487 L24.4102504,5.58450561 C23.6313906,4.80564584 22.372781,4.80147421 21.5801067,5.59414851 L19.8535534,7.32070186 L23.8535534,11.3207018 L23.8535534,11.3207018 Z M11.1464466,24.0278086 L11,24.1742552 L6,25.1742552 L7,20.1742552 L7.14644661,20.0278086 L11.1464466,24.0278086 L11.1464466,24.0278086 Z" id="pen-angled" sketch:type="MSShapeGroup"></path>
                                                </g>
                                            </g>
                                        </svg>
                                    </a> {% endcomment %}
                                    <a title="C·∫≠p nh·∫≠t b√°o c√°o" data-id="{{i.id}}" data-name="{{i.Name}}" data-report="{{i.Report}}" class="open_form_Report flex justify-center items-center ml-2 cursor-pointer px-1 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-green-600 border border-transparent rounded-md active:bg-stone-600 hover:bg-green-700 focus:outline-none focus:shadow-outline-green">
                                        <svg class="fill-white" width="30" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M50.29 6.5H42.46V4C42.4602 3.60901 42.3076 3.23342 42.0349 2.95324C41.7622 2.67305 41.3909 2.51043 41 2.5H23.18C22.7822 2.5 22.4007 2.65804 22.1194 2.93934C21.8381 3.22064 21.68 3.60218 21.68 4V6.5H14.29C12.8322 6.50264 11.4347 7.08295 10.4039 8.11383C9.37299 9.14471 8.79268 10.5421 8.79004 12V56C8.79268 57.4579 9.37299 58.8553 10.4039 59.8862C11.4347 60.917 12.8322 61.4974 14.29 61.5H50.29C51.7479 61.4974 53.1453 60.917 54.1762 59.8862C55.2071 58.8553 55.7874 57.4579 55.79 56V12C55.7874 10.5421 55.2071 9.14471 54.1762 8.11383C53.1453 7.08295 51.7479 6.50264 50.29 6.5V6.5ZM24.68 5.5H39.46V10.5H24.68V5.5ZM52.79 56C52.79 56.663 52.5266 57.2989 52.0578 57.7678C51.589 58.2366 50.9531 58.5 50.29 58.5H14.29C13.627 58.5 12.9911 58.2366 12.5223 57.7678C12.0534 57.2989 11.79 56.663 11.79 56V12C11.79 11.337 12.0534 10.7011 12.5223 10.2322C12.9911 9.76339 13.627 9.5 14.29 9.5H21.68V12C21.68 12.3978 21.8381 12.7794 22.1194 13.0607C22.4007 13.342 22.7822 13.5 23.18 13.5H41C41.3979 13.5 41.7794 13.342 42.0607 13.0607C42.342 12.7794 42.5 12.3978 42.5 12V9.5H50.33C50.9931 9.5 51.629 9.76339 52.0978 10.2322C52.5666 10.7011 52.83 11.337 52.83 12L52.79 56Z" fill="white"></path>
                                            <path d="M44.5 19.75H19.5C19.1022 19.75 18.7206 19.908 18.4393 20.1893C18.158 20.4706 18 20.8522 18 21.25C18 21.6478 18.158 22.0294 18.4393 22.3107C18.7206 22.592 19.1022 22.75 19.5 22.75H44.5C44.8978 22.75 45.2794 22.592 45.5607 22.3107C45.842 22.0294 46 21.6478 46 21.25C46 20.8522 45.842 20.4706 45.5607 20.1893C45.2794 19.908 44.8978 19.75 44.5 19.75Z" fill="white"></path>
                                            <path d="M44.5 29.6699H19.5C19.1022 29.6699 18.7206 29.828 18.4393 30.1093C18.158 30.3906 18 30.7721 18 31.1699C18 31.5677 18.158 31.9493 18.4393 32.2306C18.7206 32.5119 19.1022 32.6699 19.5 32.6699H44.5C44.8978 32.6699 45.2794 32.5119 45.5607 32.2306C45.842 31.9493 46 31.5677 46 31.1699C46 30.7721 45.842 30.3906 45.5607 30.1093C45.2794 29.828 44.8978 29.6699 44.5 29.6699Z" fill="white"></path>
                                            <path d="M44.5 39.5801H19.5C19.1022 39.5801 18.7206 39.7381 18.4393 40.0194C18.158 40.3007 18 40.6823 18 41.0801C18 41.4779 18.158 41.8594 18.4393 42.1407C18.7206 42.422 19.1022 42.5801 19.5 42.5801H44.5C44.8978 42.5801 45.2794 42.422 45.5607 42.1407C45.842 41.8594 46 41.4779 46 41.0801C46 40.6823 45.842 40.3007 45.5607 40.0194C45.2794 39.7381 44.8978 39.5801 44.5 39.5801Z" fill="white"></path>
                                            <path d="M44.5 49.5H19.5C19.1022 49.5 18.7206 49.658 18.4393 49.9393C18.158 50.2206 18 50.6022 18 51C18 51.3978 18.158 51.7794 18.4393 52.0607C18.7206 52.342 19.1022 52.5 19.5 52.5H44.5C44.8978 52.5 45.2794 52.342 45.5607 52.0607C45.842 51.7794 46 51.3978 46 51C46 50.6022 45.842 50.2206 45.5607 49.9393C45.2794 49.658 44.8978 49.5 44.5 49.5Z" fill="white"></path>
                                            </svg>
                                    </a>
                                    {% comment %} <a title="C·∫≠p nh·∫≠t ghi ch√∫ l·ªãch s·ª≠ CSKH" data-id="{{i.id}}" data-name="{{i.Name}}" data-history="{{i.History}}" class="open_form_History flex justify-center items-center ml-2 cursor-pointer px-1 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-green-600 border border-transparent rounded-md active:bg-stone-600 hover:bg-green-700 focus:outline-none focus:shadow-outline-green">
                                        <svg class="fill-white" width="33px"  viewBox="0 0 21 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                            <desc>Created with Sketch.</desc>
                                            <g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <g id="Rounded" transform="translate(-441.000000, -289.000000)">
                                                    <g id="Action" transform="translate(100.000000, 100.000000)">
                                                        <g id="-Round-/-Action-/-history" transform="translate(340.000000, 186.000000)">
                                                            <g transform="translate(0.000000, 0.000000)">
                                                                <polygon id="Path" points="0 0 24 0 24 24 0 24"></polygon>
                                                                <path d="M13.26,3 C8.17,2.86 4,6.95 4,12 L2.21,12 C1.76,12 1.54,12.54 1.86,12.85 L4.65,15.65 C4.85,15.85 5.16,15.85 5.36,15.65 L8.15,12.85 C8.46,12.54 8.24,12 7.79,12 L6,12 C6,8.1 9.18,4.95 13.1,5 C16.82,5.05 19.95,8.18 20,11.9 C20.05,15.81 16.9,19 13,19 C11.39,19 9.9,18.45 8.72,17.52 C8.32,17.21 7.76,17.24 7.4,17.6 C6.98,18.02 7.01,18.73 7.48,19.09 C9,20.29 10.91,21 13,21 C18.05,21 22.14,16.83 22,11.74 C21.87,7.05 17.95,3.13 13.26,3 Z M12.75,8 C12.34,8 12,8.34 12,8.75 L12,12.43 C12,12.78 12.19,13.11 12.49,13.29 L15.61,15.14 C15.97,15.35 16.43,15.23 16.64,14.88 C16.85,14.52 16.73,14.06 16.38,13.85 L13.5,12.14 L13.5,8.74 C13.5,8.34 13.16,8 12.75,8 Z" id="üîπIcon-Color" fill="#ffffff"></path>
                                                            </g>
                                                        </g>
                                                    </g>
                                                </g>
                                            </g>
                                        </svg>
                                    </a> {% endcomment %}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="pagination {% if list_lead.paginator.num_pages <= 1 %}hidden{% endif %} border-t-[1px] border-stone-200 flex items-center justify-center" >
                <ul class="flex items-center justify-center">page</ul>
            </div>
            <button id="open_form_delete_check_list_lead" style="display:none;" class="p-2 rounded-md bg-red-600 font-medium text-stone-100 mt-2">X√≥a danh s√°ch kh√°ch h√†ng ƒë√£ ch·ªçn</button>
        </div>
        <form method="POST" action="{% url 'lead_page_admin' %}" style="display:none;"
            class="form_create xxx fixed z-9999   pb-[10px] md:pt-[0px] md:pb-[0px] overflow-x-auto inset-0 bg-black bg-opacity-50 flex justify-center items-center px-[10px]">
            {% csrf_token %}
            <div
                class="relative p-4 bg-white rounded-lg shadow-md dark:bg-gray-800 w-[500px] flex flex-col gap-3 justify-center items-center">
                <h3 class="text-[18px] font-bold text-stone-800 w-full text-center">T·∫°o kh√°ch h√†ng m·ªõi</h3>
                <div class="grid grid-cols-2 gap-2 w-full">
                    <label class="block text-sm w-full col-span-2">
                        <span class="font-medium text-stone-600">Ngu·ªìn kh√°ch h√†ng</span>
                        <select name="Source" required
                        class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md ">
                            {% for i in Select_setting.Source %}
                            <option value="{{i}}">{{i}}</option>
                            {% endfor %}
                        </select>
                    </label>
                    <label class="block text-sm w-full">
                        <span class="font-medium text-stone-600">T√™n kh√°ch h√†ng</span>
                        <input name="Name" required
                            class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md">
                    </label>
                    <label class="block text-sm w-full">
                        <span class="font-medium text-stone-600">S·ªë ƒëi·ªán tho·∫°i</span>
                        <input name="Phone_number" required 
                            class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md">
                    </label>
                    <label class="block text-sm w-full">
                        <span class="font-medium text-stone-600">Khu v·ª±c</span>
                        <select name="Area" required
                        class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md ">
                            {% for i in Select_setting.Area %}
                            <option value="{{i}}">{{i}}</option>
                            {% endfor %}
                        </select>
                    </label>
                    <label class="block text-sm w-full">
                        <span class="font-medium text-stone-600">S·∫£n ph·∫©m</span>
                        <select name="Product" required
                        class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md ">
                            {% for i in Select_setting.Product %}
                            <option value="{{i}}">{{i}}</option>
                            {% endfor %}
                        </select>
                    </label>
                    <label class="block text-sm w-full">
                        <span class="font-medium text-stone-600">Nhu c·∫ßu</span>
                        <select name="Demand" required
                        class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md ">
                            {% for i in Select_setting.Demand %}
                            <option value="{{i}}">{{i}}</option>
                            {% endfor %}
                        </select>
                    </label>
                    <label class="block text-sm w-full">
                        <span class="font-medium text-stone-600">T√¨nh tr·∫°ng</span>
                        <input name="Status" required value="Kh√°ch h√†ng m·ªõi" readonly
                            class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md ">
                    </label>
                    <label class="flex flex-col text-sm w-full h-full ">
                        <span class="font-medium text-stone-600">Ghi ch√∫</span>
                        <textarea name="Note" required class="w-full grow block  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md "></textarea>
                    </label>
                    <label class="flex flex-col text-sm w-full h-[250px]">
                        <span class="font-medium text-stone-600">Chi·∫øn d·ªãch</span>
                        <input type="hidden" name="Belong_Campaign" id="Belong_Campaign"
                            class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md "
                            >
                        <input id="Belong_Campaign_label"
                            class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md "
                            readonly>
                        <div class="flex flex-col grow rounded-md overflow-hidden p-2 bg-stone-300 mt-2 gap-2 h-full">
                            <div id="menu_list_campaign" class="flex flex-col gap-1 h-full overflow-y-auto">
                                <!-- Chi·∫øn d·ªãch -->
                            </div>
                            <div class="flex  relative items-center w-full">
                                <input placeholder="T√¨m ki·∫øm Chi·∫øn d·ªãch" name="s_campaign"
                                    class="block pr-[30px] w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md " />
                                <svg id="submit_search_campaign"  class="w-[30px] absolute right-0 cursor-pointer" viewBox="0 0 32 32" version="1.1"
                                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                    xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                                    <!-- Generator: Sketch 3.0.3 (7891) - http://www.bohemiancoding.com/sketch -->
                                    <title>icon 111 search</title>
                                    <desc>Created with Sketch.</desc>
                                    <defs></defs>
                                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"
                                        sketch:type="MSPage">
                                        <g id="icon-111-search" sketch:type="MSArtboardGroup" fill="#000000">
                                            <path
                                                d="M19.4271164,21.4271164 C18.0372495,22.4174803 16.3366522,23 14.5,23 C9.80557939,23 6,19.1944206 6,14.5 C6,9.80557939 9.80557939,6 14.5,6 C19.1944206,6 23,9.80557939 23,14.5 C23,16.3366522 22.4174803,18.0372495 21.4271164,19.4271164 L27.0119176,25.0119176 C27.5621186,25.5621186 27.5575313,26.4424687 27.0117185,26.9882815 L26.9882815,27.0117185 C26.4438648,27.5561352 25.5576204,27.5576204 25.0119176,27.0119176 L19.4271164,21.4271164 L19.4271164,21.4271164 Z M14.5,21 C18.0898511,21 21,18.0898511 21,14.5 C21,10.9101489 18.0898511,8 14.5,8 C10.9101489,8 8,10.9101489 8,14.5 C8,18.0898511 10.9101489,21 14.5,21 L14.5,21 Z"
                                                id="search" sketch:type="MSShapeGroup"></path>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                        </div>
                    </label>
                </div>
                <div style="display: none;" id="loader_form_create" class="absolute inset-0 flex justify-center items-center bg-black bg-opacity-50">
                    <span  class="loader"></span>
                </div>
                <div class="flex items-center gap-2">
                    <button type="submit"
                        class="px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-green-600 border border-transparent rounded-md active:bg-green-600 hover:bg-green-700 focus:outline-none focus:shadow-outline-green">
                        T·∫°o ngay
                    </button>
                    <a
                        class=" close_form_create cursor-pointer px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-stone-600 border border-transparent rounded-md active:bg-stone-600 hover:bg-stone-700 focus:outline-none focus:shadow-outline-green">
                        H·ªßy
                    </a>
                </div>
            </div>
            <script>
                $(document).ready(function() {
                    $('.form_create').on('submit', function(event) {
                        $('#loader_form_create').show();
                    });
                });
            </script>
            <style>
                .loader {
                    width: 80px;
                    height: 80px;
                    border: 13px dotted #22c55e;
                    border-radius: 50%;
                    display: inline-block;
                    position: relative;
                    box-sizing: border-box;
                    animation: rotation 2s linear infinite;
                }
                
                @keyframes rotation {
                    0% {
                    transform: rotate(0deg);
                    }
                    100% {
                    transform: rotate(360deg);
                    }
                }  
            </style>
        </form>
        <form method="POST" action="{% url 'lead_update_page_admin' %}" style="display:none;"
            class="form_update xxx fixed z-9999  pb-[10px] md:pt-[0px] md:pb-[0px] overflow-x-auto inset-0 bg-black bg-opacity-50 flex justify-center items-center px-[10px]">
            {% csrf_token %}
            <input type="hidden" name="id_lead_update" id="id_lead_update" />
            <div
                class="p-4 bg-white rounded-lg shadow-md dark:bg-gray-800 w-[500px] flex flex-col gap-3 justify-center items-center">
                <h3 class="text-[18px] font-bold text-stone-800 w-full text-center">C·∫≠p nh·∫≠t kh√°ch h√†ng</h3>
                <div class="grid grid-cols-2 gap-2 w-full">
                    <label class="block text-sm w-full">
                        <span class="font-medium text-stone-600">T√™n kh√°ch h√†ng</span>
                        <input name="Name" id="Name_update" required
                            class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md">
                    </label>
                    <label class="block text-sm w-full">
                        <span class="font-medium text-stone-600">S·ªë ƒëi·ªán tho·∫°i</span>
                        <input name="Phone_number" id="Phone_number_update" required 
                            class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md">
                    </label>
                    <label class="block text-sm w-full">
                        <span class="font-medium text-stone-600">Khu v·ª±c</span>
                        <select name="Area" id="Area_update" required
                        class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md ">
                            {% for i in Select_setting.Area %}
                            <option value="{{i}}">{{i}}</option>
                            {% endfor %}
                        </select>
                    </label>
                    <label class="block text-sm w-full">
                        <span class="font-medium text-stone-600">S·∫£n ph·∫©m</span>
                        <select name="Product" id="Product_update" required
                        class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md ">
                            {% for i in Select_setting.Product %}
                            <option value="{{i}}">{{i}}</option>
                            {% endfor %}
                        </select>
                    </label>
                    <label class="block text-sm w-full">
                        <span class="font-medium text-stone-600">Nhu c·∫ßu</span>
                        <select name="Demand" id="Demand_update"  required
                        class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md ">
                            {% for i in Select_setting.Demand %}
                            <option value="{{i}}">{{i}}</option>
                            {% endfor %}
                        </select>
                    </label>
                    <label class="block text-sm w-full">
                        <span class="font-medium text-stone-600">T√¨nh tr·∫°ng</span>
                        <input name="Status" id="Status_update" required value="Kh√°ch h√†ng m·ªõi" readonly
                            class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md ">
                    </label>
                    <label class="flex flex-col text-sm w-full h-full">
                        <span class="font-medium text-stone-600">Ghi ch√∫</span>
                        <textarea name="Note" id="Note_update" required class="w-full grow block  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md "></textarea>
                    </label>
                    <label class="flex flex-col text-sm w-full h-[250px]">
                        <span class="font-medium text-stone-600">Chi·∫øn d·ªãch</span>
                        <input type="hidden" name="Belong_Campaign" id="Belong_Campaign_update"
                            class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md "
                            >
                        <input id="Belong_Campaign_label_update"
                            class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md "
                            readonly>
                        <div class="flex flex-col grow rounded-md overflow-hidden p-2 bg-stone-300 mt-2 gap-2 h-full">
                            <div id="menu_list_campaign_update" class="flex flex-col gap-1 h-full overflow-y-auto">
                                <!-- Chi·∫øn d·ªãch -->
                            </div>
                            <div class="flex  relative items-center w-full">
                                <input placeholder="T√¨m ki·∫øm Chi·∫øn d·ªãch" name="s_campaign_update"
                                    class="block pr-[30px] w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md " />
                                <svg id="submit_search_campaign_update"  class="w-[30px] absolute right-0 cursor-pointer" viewBox="0 0 32 32" version="1.1"
                                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                    xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                                    <!-- Generator: Sketch 3.0.3 (7891) - http://www.bohemiancoding.com/sketch -->
                                    <title>icon 111 search</title>
                                    <desc>Created with Sketch.</desc>
                                    <defs></defs>
                                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"
                                        sketch:type="MSPage">
                                        <g id="icon-111-search" sketch:type="MSArtboardGroup" fill="#000000">
                                            <path
                                                d="M19.4271164,21.4271164 C18.0372495,22.4174803 16.3366522,23 14.5,23 C9.80557939,23 6,19.1944206 6,14.5 C6,9.80557939 9.80557939,6 14.5,6 C19.1944206,6 23,9.80557939 23,14.5 C23,16.3366522 22.4174803,18.0372495 21.4271164,19.4271164 L27.0119176,25.0119176 C27.5621186,25.5621186 27.5575313,26.4424687 27.0117185,26.9882815 L26.9882815,27.0117185 C26.4438648,27.5561352 25.5576204,27.5576204 25.0119176,27.0119176 L19.4271164,21.4271164 L19.4271164,21.4271164 Z M14.5,21 C18.0898511,21 21,18.0898511 21,14.5 C21,10.9101489 18.0898511,8 14.5,8 C10.9101489,8 8,10.9101489 8,14.5 C8,18.0898511 10.9101489,21 14.5,21 L14.5,21 Z"
                                                id="search" sketch:type="MSShapeGroup"></path>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                        </div>
                    </label>
                </div>
                <div style="display: none;" id="loader_form_update" class="absolute inset-0 flex justify-center items-center bg-black bg-opacity-50">
                    <span  class="loader"></span>
                </div>
                <div class="flex items-center gap-2">
                    <button type="submit"
                        class="px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-green-600 border border-transparent rounded-md active:bg-green-600 hover:bg-green-700 focus:outline-none focus:shadow-outline-green">
                        C·∫≠p nh·∫≠t
                    </button>
                    <a
                        class=" close_form_update cursor-pointer px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-stone-600 border border-transparent rounded-md active:bg-stone-600 hover:bg-stone-700 focus:outline-none focus:shadow-outline-green">
                        H·ªßy
                    </a>
                </div>
            </div>
            <script>
                $(document).ready(function() {
                    $('.form_update').on('submit', function(event) {
                        $('#loader_form_update').show();
                    });
                });
            </script>
        </form>
        <form id="form_delete_check_list_lead" style="display:none;" class=" xxx px-[10px] fixed z-9999 inset-0  flex justify-center items-center bg-black bg-opacity-50">
            <div id="" class="relative  flex gap-3 flex-col justify-center items-center p-4 bg-white rounded-lg shadow-md text-red-500 font-medium ">
                <input type="hidden" id="check_list" />
                <span>* Danh s√°ch kh√°ch h√†ng ƒë√£ ch·ªçn s·∫Ω b·ªã x√≥a *</span>
                <span class="text-stone-500">Nh·∫≠p "<span class="text_code text-green-500">T√¥i ƒë·ªìng √Ω x√≥a danh s√°ch kh√°ch h√†ng ƒë√£ ch·ªçn</span>" v√†o √¥ b√™n d∆∞·ªõi v√† ti·∫øn h√†nh x√≥a</span>
                <input type="text"  placeholder="" id="text_check_list"  class=" w-full rounded-md text-center bg-stone-200 text-green-500" required/>
                <div></div>
                <div class="flex items-center gap-2">
                    <button type="submit"
                        class="px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-red-600 border border-transparent rounded-md active:bg-green-600 hover:bg-green-700 focus:outline-none focus:shadow-outline-green">
                        X√≥a kh√°ch h√†ng ƒë√£ ch·ªçn
                    </button>
                    <a
                        class="close_form_delete_check_list_lead cursor-pointer px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-stone-600 border border-transparent rounded-md active:bg-stone-600 hover:bg-stone-700 focus:outline-none focus:shadow-outline-green">
                        H·ªßy
                    </a>
                </div>
            </div>
        </form>
        <form method="post" action="{% url 'lead_update_report_history_page_staff' %}" style="display:none;"
            class="form_update_report xxx fixed z-9999 inset-0 bg-black bg-opacity-50 flex justify-center items-center px-[10px]">
            {% csrf_token %}
            <input type="hidden" name="id_lead_update_report" id="id_lead_update_report" />
            <div
                class="p-4 bg-white rounded-lg shadow-md dark:bg-gray-800 w-[500px] flex flex-col gap-3 justify-center items-center">
                <h3 class="text-[18px] font-bold text-stone-800 w-full text-center">
                    Th√™m <span class="underline">b√°o c√°o</span> kh√°ch h√†ng
                    <br>
                    <span class="text_lead_report text-green-500">"V≈© VƒÉn Th√°i"</span>
                </h3>
                <div class="grid grid-cols-1 w-full">
                    <label class="flex flex-col text-sm w-full h-[150px] col-span-2">
                        <textarea name="report_update" id="report_update" required class="w-full grow block  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md "></textarea>
                    </label>
                </div>
                <div class="flex items-center gap-2">
                    <button type="submit"
                        class="px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-green-600 border border-transparent rounded-md active:bg-green-600 hover:bg-green-700 focus:outline-none focus:shadow-outline-green">
                        Th√™m 
                    </button>
                    <a
                        class=" close_form_update_report cursor-pointer px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-stone-600 border border-transparent rounded-md active:bg-stone-600 hover:bg-stone-700 focus:outline-none focus:shadow-outline-green">
                        ƒê√≥ng
                    </a>
                </div>
            </div>
        </form>
        <form method="post" action="{% url 'lead_update_report_history_page_staff' %}" style="display:none;"
            class="form_update_history xxx fixed z-9999 inset-0 bg-black bg-opacity-50 flex justify-center items-center px-[10px]">
            {% csrf_token %}
            <input type="hidden" name="id_lead_update_history" id="id_lead_update_history" />
            <div
                class="p-4 bg-white rounded-lg shadow-md dark:bg-gray-800 w-[500px] flex flex-col gap-3 justify-center items-center">
                <h3 class="text-[18px] font-bold text-stone-800 w-full text-center">
                    Th√™m <span class="underline">ghi ch√∫ l·ªãch s·ª≠</span> kh√°ch h√†ng
                    <br>
                    <span class="text_lead_history text-green-500">"V≈© VƒÉn Th√°i"</span>
                </h3>
                <div class="grid grid-cols-1 w-full">
                    <label class="flex flex-col text-sm w-full h-[150px] col-span-2">
                        <textarea name="history_update" id="history_update" required class="w-full grow block  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md "></textarea>
                    </label>
                </div>
                <div class="flex items-center gap-2">
                    <button type="submit"
                        class="px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-green-600 border border-transparent rounded-md active:bg-green-600 hover:bg-green-700 focus:outline-none focus:shadow-outline-green">
                        Th√™m 
                    </button>
                    <a
                        class=" close_form_update_history cursor-pointer px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-stone-600 border border-transparent rounded-md active:bg-stone-600 hover:bg-stone-700 focus:outline-none focus:shadow-outline-green">
                        ƒê√≥ng
                    </a>
                </div>
            </div>
        </form>
        <form method="POST" action="{% url 'upload_file_lead_page_admin' %}" enctype="multipart/form-data" style="display:none;"
            class="form_upload_file xxx fixed z-9999 inset-0 bg-black bg-opacity-50 flex justify-center items-center px-[10px]">
            {% csrf_token %}
            <div
                class="relative p-4 bg-white rounded-lg shadow-md dark:bg-gray-800 w-[500px] flex flex-col gap-3 justify-center items-center">
                <h3 class="text-[18px] font-bold text-stone-800 w-full text-center">Nh·∫≠p file kh√°ch h√†ng m·ªõi (.xlsx)</h3>
                <div class="grid grid-cols-1  w-full">
                    <label class="block text-sm w-full">
                        <input name="file_upload" type="file" accept=".xlsx" required
                            class="block w-full  text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-green-400 focus:outline-none focus:shadow-outline-green dark:text-gray-300 dark:focus:shadow-outline-gray form-input rounded-md">
                    </label>
                </div>
                <div style="display: none;" id="loader_form_upload_file" class="absolute inset-0 flex justify-center items-center bg-black bg-opacity-50">
                    <span  class="loader"></span>
                </div>
                <div class="flex items-center gap-2">
                    <button type="submit"
                        class="px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-green-600 border border-transparent rounded-md active:bg-green-600 hover:bg-green-700 focus:outline-none focus:shadow-outline-green">
                        T·∫°o d·ªØ li·ªáu
                    </button>
                    <a
                        class=" close_form_upload_file cursor-pointer px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-stone-600 border border-transparent rounded-md active:bg-stone-600 hover:bg-stone-700 focus:outline-none focus:shadow-outline-green">
                        H·ªßy
                    </a>
                </div>
            </div>
            <script>
                $(document).ready(function() {
                    $('.form_upload_file').on('submit', function(event) {
                        $('#loader_form_upload_file').show();
                    });

                    $('.close_form_upload_file').on('click', function(event) {
                        $('.form_upload_file').hide();
                    });
                    $('.open_form_upload_file').on('click', function(event) {
                        $(".xxx").hide();
                        $('.form_upload_file').show();
                    });
                });
            </script>
            <style>
                .loader {
                    width: 80px;
                    height: 80px;
                    border: 13px dotted #22c55e;
                    border-radius: 50%;
                    display: inline-block;
                    position: relative;
                    box-sizing: border-box;
                    animation: rotation 2s linear infinite;
                }
                
                @keyframes rotation {
                    0% {
                    transform: rotate(0deg);
                    }
                    100% {
                    transform: rotate(360deg);
                    }
                }  
            </style>
        </form>
        <div id="view_report" style="display:none;"
            class="view_report xxx fixed z-9999 inset-0 bg-black bg-opacity-50 flex justify-center items-center px-[10px]">
            {% csrf_token %}
            <div
                class="relative p-4 bg-white rounded-lg shadow-md dark:bg-gray-800 w-[500px] flex flex-col gap-3 justify-center items-center h-[600px]">
                <h3 class="text-[18px] font-bold text-stone-800 w-full text-center">
                    Danh s√°ch b√°o c√°o kh√°ch h√†ng
                    <br>
                    <span id="name_lead_report" class="text-green-500"></span>
                </h3>
                <div id="text_html_report" class="flex flex-col  w-full bg-stone-200 rounded-md p-2 grow overflow-y-auto overflow-x-auto">
                </div>
                <div style="display: none;" id="loader_form_upload_file" class="absolute inset-0 flex justify-center items-center bg-black bg-opacity-50">
                    <span  class="loader"></span>
                </div>
                <div class="flex items-center gap-2">
                    <a
                        class=" close_view_report cursor-pointer px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-stone-600 border border-transparent rounded-md active:bg-stone-600 hover:bg-stone-700 focus:outline-none focus:shadow-outline-green">
                        ƒê√≥ng
                    </a>
                </div>
            </div>
            <script>
                $(document).ready(function() {
                    $('.close_view_report').on('click', function(event) {
                        $('.view_report').hide();
                    });
                    $('.open_view_report').on('click', function(event) {
                        $(".xxx").hide();
                        $.ajax({
                            url: '{% url "get_list_report_history" %}',  // URL c·ªßa API b·∫°n mu·ªën g·ªçi
                            method: 'GET',
                            data: {
                                'type_get':'Report',
                                'id_lead_report_history': $(this).data('id'),  // G·ª≠i d·ªØ li·ªáu t√¨m ki·∫øm v·ªõi key l√† 's'
                                'csrfmiddlewaretoken': '{{ csrf_token }}'  // ƒê·∫£m b·∫£o CSRF token c√≥ trong request
                            },
                            success: function(response) {
                                if (response.success) {
                                    let reportHtml = '';  // Bi·∫øn ƒë·ªÉ l∆∞u HTML c·ªßa b√°o c√°o
                                    // L·∫∑p qua c√°c d·ªØ li·ªáu tr·∫£ v·ªÅ (gi·∫£ s·ª≠ response.data ch·ª©a c√°c ƒë·ªëi t∆∞·ª£ng c·∫ßn hi·ªÉn th·ªã)
                                    response.data.forEach(function(item, index) {
                                        // Chuy·ªÉn ƒë·ªïi Creation_time th√†nh ƒë·ªãnh d·∫°ng mong mu·ªën (v√≠ d·ª•: ng√†y-th√°ng-nƒÉm gi·ªù:ph√∫t)
                                        let reportNumber = index + 1;
                                        let formattedReport = item.report.replace(/\n/g, '<br>');  // Thay \n b·∫±ng <br>
                                        // T·∫°o HTML cho m·ªói b√°o c√°o
                                        reportHtml += `
                                            <div class="flex flex-col gap-1 text-sm w-full">
                                                <span>${reportNumber} ------------------------------------------------ ${item.Creation_time}</span>
                                                <span>${formattedReport}</span>
                                            </div>
                                            <br>
                                        `;
                                    });
                                    $('#text_html_report').html('');
                                    // Ch√®n HTML v√†o trong ph·∫ßn t·ª≠ #text_html_report
                                    $('#text_html_report').append(reportHtml);

                                } else {
                                    console.log('Kh√¥ng t√¨m th·∫•y chi·∫øn d·ªãch n√†o');
                                }
                            },
                            error: function (response) {
                                console.log('T√¨m ki·∫øm th·∫•t b·∫°i', response);
                            }
                        });
                        $('#name_lead_report').text($(this).data('name'));
                        $('.view_report').show();
                    });
                });
            </script>
        </div>
        <div id="view_history" style="display:none;"
            class="view_history xxx fixed z-9999 inset-0 bg-black bg-opacity-50 flex justify-center items-center px-[10px]">
            {% csrf_token %}
            <div
                class="relative p-4 bg-white rounded-lg shadow-md dark:bg-gray-800 w-[500px] flex flex-col gap-3 justify-center items-center h-[600px]">
                <h3 class="text-[18px] font-bold text-stone-800 w-full text-center">
                    Danh s√°ch ghi ch√∫ l·ªãch s·ª≠ kh√°ch h√†ng
                    <br>
                    <span id="name_lead_history" class="text-green-500"></span>
                </h3>
                <div id="text_html_history" class="flex flex-col  w-full bg-stone-200 rounded-md p-2 grow overflow-y-auto overflow-x-auto">
                </div>
                <div style="display: none;" id="loader_form_upload_file" class="absolute inset-0 flex justify-center items-center bg-black bg-opacity-50">
                    <span  class="loader"></span>
                </div>
                <div class="flex items-center gap-2">
                    <a
                        class=" close_view_history cursor-pointer px-3 py-1 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-stone-600 border border-transparent rounded-md active:bg-stone-600 hover:bg-stone-700 focus:outline-none focus:shadow-outline-green">
                        ƒê√≥ng
                    </a>
                </div>
            </div>
            <script>
                $(document).ready(function() {
                    $('.close_view_history').on('click', function(event) {
                        $('.view_history').hide();
                    });
                    $('.open_view_history').on('click', function(event) {
                        $(".xxx").hide();
                        $.ajax({
                            url: '{% url "get_list_report_history" %}',  // URL c·ªßa API b·∫°n mu·ªën g·ªçi
                            method: 'GET',
                            data: {
                                'type_get':'History',
                                'id_lead_report_history': $(this).data('id'),  // G·ª≠i d·ªØ li·ªáu t√¨m ki·∫øm v·ªõi key l√† 's'
                                'csrfmiddlewaretoken': '{{ csrf_token }}'  // ƒê·∫£m b·∫£o CSRF token c√≥ trong request
                            },
                            success: function(response) {
                                if (response.success) {
                                    let reportHtml = '';  // Bi·∫øn ƒë·ªÉ l∆∞u HTML c·ªßa b√°o c√°o
                                    // L·∫∑p qua c√°c d·ªØ li·ªáu tr·∫£ v·ªÅ (gi·∫£ s·ª≠ response.data ch·ª©a c√°c ƒë·ªëi t∆∞·ª£ng c·∫ßn hi·ªÉn th·ªã)
                                    response.data.forEach(function(item, index) {
                                        // Chuy·ªÉn ƒë·ªïi Creation_time th√†nh ƒë·ªãnh d·∫°ng mong mu·ªën (v√≠ d·ª•: ng√†y-th√°ng-nƒÉm gi·ªù:ph√∫t)
                                        let reportNumber = index + 1;
                                        let formattedReport = item.history.replace(/\n/g, '<br>');  // Thay \n b·∫±ng <br>
                                        // T·∫°o HTML cho m·ªói b√°o c√°o
                                        reportHtml += `
                                            <div class="flex flex-col gap-1 text-sm w-full">
                                                <span>${reportNumber} ------------------------------------------------ ${item.Creation_time}</span>
                                                <span>${formattedReport}</span>
                                            </div>
                                            <br>
                                        `;
                                    });
                                    $('#text_html_history').html('');
                                    // Ch√®n HTML v√†o trong ph·∫ßn t·ª≠ #text_html_report
                                    $('#text_html_history').append(reportHtml);

                                } else {
                                    console.log('Kh√¥ng t√¨m th·∫•y chi·∫øn d·ªãch n√†o');
                                }
                            },
                            error: function (response) {
                                console.log('T√¨m ki·∫øm th·∫•t b·∫°i', response);
                            }
                        });
                        $('#name_lead_history').text($(this).data('name'));
                        $('.view_history').show();
                    });
                });
            </script>
        </div>
        {% else %}
        <h1 class="text-[18px] font-bold text-yellow-500">T√†i kho·∫£n c·∫£u b·∫°n ƒëang ch·ªù ph√™ duy·ªát !</h1>
        {% endif %}
    </main>
</div>
<script>
    $(document).ready(function() {
        function updateTableWidth() {
          var containerWidth = $('#table-container').parent().width(); // L·∫•y chi·ªÅu r·ªông c·ªßa ph·∫ßn t·ª≠ cha
          var tableWidth = $('#table-container').outerWidth(); // L·∫•y chi·ªÅu r·ªông c·ªßa b·∫£ng
      
          // Ki·ªÉm tra n·∫øu b·∫£ng r·ªông h∆°n chi·ªÅu r·ªông container, th√¨ m·ªõi tr·ª´ 250px
          if (tableWidth > containerWidth) {
            $('#table-container').width(containerWidth - 250); // Tr·ª´ ƒëi 250px
          } else {
            $('#table-container').width(''); // ƒê·∫∑t l·∫°i chi·ªÅu r·ªông m·∫∑c ƒë·ªãnh
          }
        }
      
        // G·ªçi h√†m khi trang ƒë∆∞·ª£c t·∫£i v√† khi c·ª≠a s·ªï thay ƒë·ªïi k√≠ch th∆∞·ªõc
        updateTableWidth();
        $(window).resize(function() {
          updateTableWidth();
        });
      });      
</script>
<script>
    $(document).ready(function () {
        $(".open_form_Report").click(function () {
            $(".xxx").hide();
            $(".form_update_report").show();
            $("#id_lead_update_report").val($(this).data('id'));
            $("#report_update").val($(this).data('report'));
            $(".text_lead_report").text($(this).data('name'));
        });
        $(".close_form_update_report").click(function () {
            $(".form_update_report").hide();
        });

        $(".open_form_History").click(function () {
            $(".xxx").hide();
            $(".form_update_history").show();
            $("#id_lead_update_history").val($(this).data('id'));
            $("#history_update").val($(this).data('history'));
            $(".text_lead_history").text($(this).data('name'));
        });
        $(".close_form_update_history").click(function () {
            $(".form_update_history").hide();
        });
    });
</script>
<script>
    $(document).on('click', '.import_campaign', function () {
        $("#Belong_Campaign_label").val($(this).data('campaign-name'));
        $("#Belong_Campaign").val($(this).data('campaign-id'));
    });
</script>
<script>
    $(document).on('click', '.import_user', function () {
        $("#Belong_User_label").val($(this).data('user-name'));
        $("#Belong_User").val($(this).data('user-id'));
    });
</script>
<script>
    $(document).on('click', '.import_campaign_update', function () {
        $("#Belong_Campaign_label_update").val($(this).data('campaign-name'));
        $("#Belong_Campaign_update").val($(this).data('campaign-id'));
    });
</script>
<script>
    $(document).on('click', '.import_user_update', function () {
        $("#Belong_User_label_update").val($(this).data('user-name'));
        $("#Belong_User_update").val($(this).data('user-id'));
    });
</script>
<script>
    $(document).ready(function () {
        $(".open_form_create").click(function () {
            $(".xxx").hide();
            $(".form_create").show();
            $.ajax({
                url: '{% url "search_campaign_page_admin" %}',  // URL c·ªßa API b·∫°n mu·ªën g·ªçi
                method: 'POST',
                data: {
                    's':'',  // G·ª≠i d·ªØ li·ªáu t√¨m ki·∫øm v·ªõi key l√† 's'
                    'csrfmiddlewaretoken': '{{ csrf_token }}'  // ƒê·∫£m b·∫£o CSRF token c√≥ trong request
                },
                success: function(response) {
                    if (response.success) {
                        $('#menu_list_campaign').empty();  // D·ªçn s·∫°ch danh s√°ch tr∆∞·ªõc khi th√™m m·ªõi
                        for (let i = 0; i < response.list_campaign.length; i++) {
                            const campaign = response.list_campaign[i];
                            $('#menu_list_campaign').append(`
                                <span data-campaign-name="${campaign.Name}" data-campaign-id="${campaign.id}" class="import_campaign cursor-pointer hover:text-green-700">
                                    ${campaign.Name}
                                </span>
                            `);
                        }
                    } else {
                        console.log('Kh√¥ng t√¨m th·∫•y chi·∫øn d·ªãch n√†o');
                    }
                },
                error: function (response) {
                    console.log('T√¨m ki·∫øm th·∫•t b·∫°i', response);
                }
            });
            $.ajax({
                url: '{% url "search_user_page_admin" %}',  // URL c·ªßa API b·∫°n mu·ªën g·ªçi
                method: 'POST',
                data: {
                    's':'',  // G·ª≠i d·ªØ li·ªáu t√¨m ki·∫øm v·ªõi key l√† 's'
                    'csrfmiddlewaretoken': '{{ csrf_token }}'  // ƒê·∫£m b·∫£o CSRF token c√≥ trong request
                },
                success: function(response) {
                    if (response.success) {
                        $('#menu_list_user').empty();  // D·ªçn s·∫°ch danh s√°ch tr∆∞·ªõc khi th√™m m·ªõi
                        for (let i = 0; i < response.list_user.length; i++) {
                            const user = response.list_user[i];
                            $('#menu_list_user').append(`
                                <span data-user-name="${user.username}" data-user-id="${user.id}" class="import_user cursor-pointer hover:text-green-700">
                                    ${user.username}
                                </span>
                            `);
                        }
                    } else {
                        console.log('Kh√¥ng t√¨m th·∫•y nh√¢n vi√™n n√†o');
                    }
                },
                error: function (response) {
                    console.log('T√¨m ki·∫øm th·∫•t b·∫°i', response);
                }
            });
        });
        $(".close_form_create").click(function () {
            $(".form_create").hide();
        });

        $('#open_form_delete_check_list_lead').click(function(){
            $(".xxx").hide();
            $('#form_delete_check_list_lead').show();
        });
        $('.close_form_delete_check_list_lead').click(function(){
            $('#form_delete_check_list_lead').hide();
        });
    });
</script>
<script>
    $(document).ready(function () {
        $(".open_form_update").click(function () {
            $(".xxx").hide();
            $(".form_update").show();

            $("#id_lead_update").val($(this).data('id'));
            $("#Name_update").val($(this).data('name'));
            $("#Phone_number_update").val($(this).data('phone-number'));
            $("#Area_update").val($(this).data('area'));
            $("#Product_update").val($(this).data('product'));
            $("#Demand_update").val($(this).data('demand'));
            $("#Status_update").val($(this).data('status'));
            $("#Note_update").val($(this).data('note'));
            $("#Belong_Campaign_label_update").val($(this).data('belong-campaign-name'));
            $("#Belong_Campaign_update").val($(this).data('belong-campaign-id'));
            $("#Belong_User_label_update").val($(this).data('belong-user-username'));
            $("#Belong_User_update").val($(this).data('belong-user-id'));

            $.ajax({
                url: '{% url "search_campaign_page_admin" %}',  // URL c·ªßa API b·∫°n mu·ªën g·ªçi
                method: 'POST',
                data: {
                    's':'',  // G·ª≠i d·ªØ li·ªáu t√¨m ki·∫øm v·ªõi key l√† 's'
                    'csrfmiddlewaretoken': '{{ csrf_token }}'  // ƒê·∫£m b·∫£o CSRF token c√≥ trong request
                },
                success: function(response) {
                    if (response.success) {
                        $('#menu_list_campaign_update').empty();  // D·ªçn s·∫°ch danh s√°ch tr∆∞·ªõc khi th√™m m·ªõi
                        for (let i = 0; i < response.list_campaign.length; i++) {
                            const campaign = response.list_campaign[i];
                            $('#menu_list_campaign_update').append(`
                                <span data-campaign-name="${campaign.Name}" data-campaign-id="${campaign.id}" class="import_campaign_update cursor-pointer hover:text-green-700">
                                    ${campaign.Name}
                                </span>
                            `);
                        }
                    } else {
                        console.log('Kh√¥ng t√¨m th·∫•y chi·∫øn d·ªãch n√†o');
                    }
                },
                error: function (response) {
                    console.log('T√¨m ki·∫øm th·∫•t b·∫°i', response);
                }
            });

            $.ajax({
                url: '{% url "search_user_page_admin" %}',  // URL c·ªßa API b·∫°n mu·ªën g·ªçi
                method: 'POST',
                data: {
                    's':'',  // G·ª≠i d·ªØ li·ªáu t√¨m ki·∫øm v·ªõi key l√† 's'
                    'csrfmiddlewaretoken': '{{ csrf_token }}'  // ƒê·∫£m b·∫£o CSRF token c√≥ trong request
                },
                success: function(response) {
                    if (response.success) {
                        $('#menu_list_user_update').empty();  // D·ªçn s·∫°ch danh s√°ch tr∆∞·ªõc khi th√™m m·ªõi
                        for (let i = 0; i < response.list_user.length; i++) {
                            const user = response.list_user[i];
                            $('#menu_list_user_update').append(`
                                <span data-user-name="${user.username}" data-user-id="${user.id}" class="import_user_update cursor-pointer hover:text-green-700">
                                    ${user.username}
                                </span>
                            `);
                        }
                    } else {
                        console.log('Kh√¥ng t√¨m th·∫•y nh√¢n vi√™n n√†o');
                    }
                },
                error: function (response) {
                    console.log('T√¨m ki·∫øm th·∫•t b·∫°i', response);
                }
            });
        });

        $(".close_form_update").click(function () {
            $(".form_update").hide();
        });
    });
</script>
<script>
    $(document).ready(function () {
        $(".open_form_delete").click(function () {
            $(".xxx").hide();
            $(".form_delete").show();
            $("#id_delete").val($(this).data('id'));
            $("#text_delete").text($(this).data('name'));
        });

        $(".close_form_delete").click(function () {
            $(".form_delete").hide();
        });
    });
</script>
<script>
    $(document).ready(function () {
        // Khi nh·∫•n n√∫t SVG (n√∫t t√¨m ki·∫øm)
        $('#submit_search_campaign').on('click', function (event) {
            event.preventDefault();  // Ng·ª´ng h√†nh ƒë·ªông m·∫∑c ƒë·ªãnh c·ªßa n√∫t
            // S·ª≠ d·ª•ng serialize() ƒë·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ form
            var searchQuery_campaign = $('input[name="s_campaign"]').val();
            $.ajax({
                url: '{% url "search_campaign_page_admin" %}',  // URL c·ªßa API b·∫°n mu·ªën g·ªçi
                method: 'POST',
                data: {
                    's': searchQuery_campaign,  // G·ª≠i d·ªØ li·ªáu t√¨m ki·∫øm v·ªõi key l√† 's'
                    'csrfmiddlewaretoken': '{{ csrf_token }}'  // ƒê·∫£m b·∫£o CSRF token c√≥ trong request
                },
                success: function(response) {
                    if (response.success) {
                        $('#menu_list_campaign').empty();  // D·ªçn s·∫°ch danh s√°ch tr∆∞·ªõc khi th√™m m·ªõi
                        for (let i = 0; i < response.list_campaign.length; i++) {
                            const campaign = response.list_campaign[i];
                            $('#menu_list_campaign').append(`
                                <span data-campaign-name="${campaign.Name}" data-campaign-id="${campaign.id}" class="import_campaign cursor-pointer hover:text-green-700">
                                    ${campaign.Name}
                                </span>
                            `);
                        }
                    } else {
                        console.log('Kh√¥ng t√¨m th·∫•y chi·∫øn d·ªãch n√†o');
                    }
                },
                error: function (response) {
                    console.log('T√¨m ki·∫øm th·∫•t b·∫°i', response);
                }
            });
        });

        $('#submit_search_user').on('click', function (event) {
            event.preventDefault();  // Ng·ª´ng h√†nh ƒë·ªông m·∫∑c ƒë·ªãnh c·ªßa n√∫t
            // S·ª≠ d·ª•ng serialize() ƒë·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ form
            var searchQuery_user = $('input[name="s_user"]').val();
            $.ajax({
                url: '{% url "search_user_page_admin" %}',  // URL c·ªßa API b·∫°n mu·ªën g·ªçi
                method: 'POST',
                data: {
                    's':searchQuery_user,  // G·ª≠i d·ªØ li·ªáu t√¨m ki·∫øm v·ªõi key l√† 's'
                    'csrfmiddlewaretoken': '{{ csrf_token }}'  // ƒê·∫£m b·∫£o CSRF token c√≥ trong request
                },
                success: function(response) {
                    if (response.success) {
                        $('#menu_list_user').empty();  // D·ªçn s·∫°ch danh s√°ch tr∆∞·ªõc khi th√™m m·ªõi
                        for (let i = 0; i < response.list_user.length; i++) {
                            const user = response.list_user[i];
                            $('#menu_list_user').append(`
                                <span data-user-name="${user.username}" data-user-id="${user.id}" class="import_user cursor-pointer hover:text-green-700">
                                    ${user.username}
                                </span>
                            `);
                        }
                    } else {
                        console.log('Kh√¥ng t√¨m th·∫•y nh√¢n vi√™n n√†o');
                    }
                },
                error: function (response) {
                    console.log('T√¨m ki·∫øm th·∫•t b·∫°i', response);
                }
            });
        });
    });
</script>
<script>
    $(document).ready(function () {
        // Khi nh·∫•n n√∫t SVG (n√∫t t√¨m ki·∫øm)
        $('#submit_search_campaign_update').on('click', function (event) {
            event.preventDefault();  // Ng·ª´ng h√†nh ƒë·ªông m·∫∑c ƒë·ªãnh c·ªßa n√∫t
            // S·ª≠ d·ª•ng serialize() ƒë·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ form
            var searchQuery_campaign_update = $('input[name="s_campaign_update"]').val();
            $.ajax({
                url: '{% url "search_campaign_page_admin" %}',  // URL c·ªßa API b·∫°n mu·ªën g·ªçi
                method: 'POST',
                data: {
                    's': searchQuery_campaign_update,  // G·ª≠i d·ªØ li·ªáu t√¨m ki·∫øm v·ªõi key l√† 's'
                    'csrfmiddlewaretoken': '{{ csrf_token }}'  // ƒê·∫£m b·∫£o CSRF token c√≥ trong request
                },
                success: function(response) {
                    if (response.success) {
                        $('#menu_list_campaign_update').empty();  // D·ªçn s·∫°ch danh s√°ch tr∆∞·ªõc khi th√™m m·ªõi
                        for (let i = 0; i < response.list_campaign.length; i++) {
                            const campaign = response.list_campaign[i];
                            $('#menu_list_campaign_update').append(`
                                <span data-campaign-name="${campaign.Name}" data-campaign-id="${campaign.id}" class="import_campaign_update cursor-pointer hover:text-green-700">
                                    ${campaign.Name}
                                </span>
                            `);
                        }
                    } else {
                        console.log('Kh√¥ng t√¨m th·∫•y chi·∫øn d·ªãch n√†o');
                    }
                },
                error: function (response) {
                    console.log('T√¨m ki·∫øm th·∫•t b·∫°i', response);
                }
            });
        });

        $('#submit_search_user_update').on('click', function (event) {
            event.preventDefault();  // Ng·ª´ng h√†nh ƒë·ªông m·∫∑c ƒë·ªãnh c·ªßa n√∫t
            // S·ª≠ d·ª•ng serialize() ƒë·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ form
            var searchQuery_user_update = $('input[name="s_user_update"]').val();
            $.ajax({
                url: '{% url "search_user_page_admin" %}',  // URL c·ªßa API b·∫°n mu·ªën g·ªçi
                method: 'POST',
                data: {
                    's':searchQuery_user_update,  // G·ª≠i d·ªØ li·ªáu t√¨m ki·∫øm v·ªõi key l√† 's'
                    'csrfmiddlewaretoken': '{{ csrf_token }}'  // ƒê·∫£m b·∫£o CSRF token c√≥ trong request
                },
                success: function(response) {
                    if (response.success) {
                        $('#menu_list_user_update').empty();  // D·ªçn s·∫°ch danh s√°ch tr∆∞·ªõc khi th√™m m·ªõi
                        for (let i = 0; i < response.list_user.length; i++) {
                            const user = response.list_user[i];
                            $('#menu_list_user_update').append(`
                                <span data-user-name="${user.username}" data-user-id="${user.id}" class="import_user_update cursor-pointer hover:text-green-700">
                                    ${user.username}
                                </span>
                            `);
                        }
                    } else {
                        console.log('Kh√¥ng t√¨m th·∫•y nh√¢n vi√™n n√†o');
                    }
                },
                error: function (response) {
                    console.log('T√¨m ki·∫øm th·∫•t b·∫°i', response);
                }
            });
        });
    });
</script>
<script>
    // JavaScript/jQuery
    $(document).ready(function() {
        // Khi checkbox 'check_all_user' thay ƒë·ªïi tr·∫°ng th√°i
        $('#check_all_lead').on('change', function() {
            var isChecked = $(this).is(':checked');
            
            // C·∫≠p nh·∫≠t tr·∫°ng th√°i c·ªßa t·∫•t c·∫£ c√°c checkbox 'check_lead'
            $('.check_lead').prop('checked', isChecked);

            // R√† so√°t t·∫•t c·∫£ c√°c checkbox 'check_lead' ƒë∆∞·ª£c ch·ªçn v√† l∆∞u gi√° tr·ªã v√†o input hidden
            updateCheckedValues();
        });

        // Khi b·∫•t k·ª≥ checkbox 'check_lead' thay ƒë·ªïi tr·∫°ng th√°i
        $('.check_lead').on('change', function() {
            // Ki·ªÉm tra tr·∫°ng th√°i c·ªßa checkbox 'check_all_lead'
            var allChecked = $('.check_lead').length === $('.check_lead:checked').length;
            $('#check_all_lead').prop('checked', allChecked);

            // R√† so√°t t·∫•t c·∫£ c√°c checkbox 'check_lead' ƒë∆∞·ª£c ch·ªçn v√† l∆∞u gi√° tr·ªã v√†o input hidden
            updateCheckedValues();
        });

        function updateCheckedValues() {
            var checkedValues = [];
            $('.check_lead:checked').each(function() {
                checkedValues.push($(this).val());
            });
            $('#check_list').val(JSON.stringify(checkedValues)); // G√°n m·∫£ng gi√° tr·ªã v√†o input hidden
            if (checkedValues.length > 0) {
                $('#open_form_delete_check_list_lead').show();
            } else {
                $('#open_form_delete_check_list_lead').hide();
            }
        }
    });
</script>
<script>
    $(document).ready(function () {
        $('#form_delete_check_list_lead').on('submit', function (event) {
            event.preventDefault();
            $.ajax({
                url: '{% url 'delete_check_list_lead_admin' %}',
                method: 'POST',
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}'
                },
                contentType: 'application/json',
                data: JSON.stringify({
                    check_list: $('#check_list').val(),
                    text_check_list: $('#text_check_list').val()
                }),
                success: function (response) {
                    if (response.success) {
                        window.location.href = response.redirect_url;
                    } else {
                        alert(response.message);
                    }
                },
                error: function (response) {
                    console.log('X√≥a th·∫•t b·∫°i', response);
                }
            });
        });
    });
</script>
<script>
    // selecting required element
    const element = document.querySelector(".pagination ul");
    let totalPages = {{list_lead.paginator.num_pages}};
    let page = {{list_lead.number}};
    let s_l = "{{ s|default:'' }}";  // N·∫øu s kh√¥ng c√≥ gi√° tr·ªã, d√πng gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† ''
    let f_l = "{{ f|default:'' }}";  // N·∫øu f kh√¥ng c√≥ gi√° tr·ªã, d√πng gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† ''
    let st_l = "{{ st|default:'' }}";  // N·∫øu st kh√¥ng c√≥ gi√° tr·ªã, d√πng gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† ''

    //calling function with passing parameters and adding inside element which is ul tag
    element.innerHTML = createPagination(totalPages, page);
    function createPagination(totalPages, page) {
        let liTag = '';
        let active;
        let beforePage = page - 1;
        let afterPage = page + 1;

        // Hi·ªÉn th·ªã n√∫t "Trang tr∆∞·ªõc" n·∫øu kh√¥ng ph·∫£i l√† trang ƒë·∫ßu ti√™n
        if (page > 1) {
            liTag += `<a href="?p=${page - 1}&s=${s_l}&f=${f_l}&st=${st_l}" class="btn prev"><span><i class="fas fa-angle-left"></i>Trang tr∆∞·ªõc</span></a>`;
        }

        // N·∫øu t·ªïng s·ªë trang nh·ªè h∆°n 8, hi·ªÉn th·ªã t·∫•t c·∫£ c√°c trang m√† kh√¥ng c·∫ßn d·∫•u ba ch·∫•m
        if (totalPages < 8) {
            for (let i = 1; i <= totalPages; i++) {
                active = (page == i) ? "active" : "";
                liTag += `<a href="?p=${i}&s=${s_l}&f=${f_l}&st=${st_l}" class="numb ${active}"><span>${i}</span></a>`;
            }
        } else {
            // N·∫øu t·ªïng s·ªë trang >= 8, hi·ªÉn th·ªã c√≥ ƒëi·ªÅu ki·ªán c√°c trang v·ªõi d·∫•u ba ch·∫•m
            if (page > 2) {
                liTag += `<a href="?p=1&s=${s_l}&f=${f_l}&st=${st_l}" class="first numb"><span>1</span></a>`;
                if (page > 3) {
                    liTag += `<a class="dots"><span>...</span></a>`;
                }
            }

            // ƒêi·ªÅu ch·ªânh tr∆∞·ªõc v√† sau trang hi·ªán t·∫°i
            if (page == totalPages) {
                beforePage = beforePage - 2;
            } else if (page == totalPages - 1) {
                beforePage = beforePage - 1;
            }
            if (page == 1) {
                afterPage = afterPage + 2;
            } else if (page == 2) {
                afterPage = afterPage + 1;
            }

            // Hi·ªÉn th·ªã c√°c trang trong kho·∫£ng tr∆∞·ªõc v√† sau trang hi·ªán t·∫°i
            for (let plength = beforePage; plength <= afterPage; plength++) {
                if (plength > totalPages) continue;
                if (plength == 0) plength = 1;
                active = (page == plength) ? "active" : "";
                liTag += `<a href="?p=${plength}&s=${s_l}&f=${f_l}&st=${st_l}" class="numb ${active}"><span>${plength}</span></a>`;
            }

            // Hi·ªÉn th·ªã trang cu·ªëi c√πng v·ªõi d·∫•u ba ch·∫•m n·∫øu c·∫ßn
            if (page < totalPages - 1) {
                if (page < totalPages - 2) {
                    liTag += `<a class="dots"><span>...</span></a>`;
                }
                liTag += `<a href="?p=${totalPages}&s=${s_l}&f=${f_l}&st=${st_l}" class="last numb"><span>${totalPages}</span></a>`;
            }
        }

        // Hi·ªÉn th·ªã n√∫t "Trang sau" n·∫øu kh√¥ng ph·∫£i l√† trang cu·ªëi c√πng
        if (page < totalPages) {
            liTag += `<a href="?p=${page + 1}&s=${s_l}&f=${f_l}&st=${st_l}" class="btn next"><span>Trang sau <i class="fas fa-angle-right"></i></span></a>`;
        }

        element.innerHTML = liTag;
        return liTag;
    }
</script>
{% endblock %}